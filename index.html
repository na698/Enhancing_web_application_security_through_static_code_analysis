<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Dashboard: Enhancing Web App Security with SCA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral Tech -->
    <!-- Application Structure Plan: A thematic, multi-section dashboard approach is used to translate the formal PRD into an engaging and user-centric experience. This structure prioritizes usability by allowing different stakeholders (developers, managers, analysts) to quickly access information relevant to them. The flow is designed to tell a story: starting with the core problem, presenting the interactive solution/process, defining the goals, detailing stakeholder roles, and finally outlining the technical scope. New AI tools have been added to provide practical, role-specific assistance for developers, managers, and security analysts. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Problem/Context -> Goal: Inform -> Viz: Text block with TTS button -> Interaction: Click to hear summary -> Justification: Adds an an accessibility layer for auditory learners and enhances engagement.
        - Report Info: Problem/Context -> Goal: Compare -> Viz: Side-by-side layout -> Interaction: Visual contrast -> Justification: Clearly shows the value proposition.
        - Report Info: Use Case/Process -> Goal: Organize -> Viz: Interactive Flowchart (HTML/CSS/JS) -> Interaction: Click to reveal details -> Justification: Makes the workflow dynamic and easy to follow.
        - Report Info: Success Metrics -> Goal: Inform -> Viz: Cards with simulated progress bars -> Interaction: Hover effects -> Justification: Makes abstract goals feel tangible.
        - Report Info: Stakeholders -> Goal: Organize -> Viz: Tabbed Interface (JS) -> Interaction: Click to switch roles -> Justification: Segments information for different audiences, improving clarity.
        - Report Info: Vulnerability Types -> Goal: Compare/Inform -> Viz: Bar Chart (Chart.js) -> Interaction: Tooltips on hover, click to get LLM details -> Justification: Quickly visualizes the primary threats, with new AI-powered drill-down insights.
        - Report Info: Scope -> Goal: Compare -> Viz: Two-column list -> Interaction: None -> Justification: Simple, clear definition of project boundaries.
        - Report Info: Project Timeline -> Goal: Plan -> Viz: Text output -> Interaction: User inputs, button click to get LLM generated timeline -> Justification: Provides a dynamic project planning tool.
        - Report Info: Code Security -> Goal: Analyze -> Viz: Text output -> Interaction: User inputs code, button click to get LLM analysis -> Justification: Empowers developers with an on-demand security assistant.
        - Report Info: Alerts -> Goal: Communicate -> Viz: Text output -> Interaction: User inputs details, button click to get LLM drafted alert -> Justification: Provides a practical tool for project managers and security analysts.
        - Report Info: Threat Modeling -> Goal: Plan/Analyze -> Viz: Text output -> Interaction: User inputs system description, button click to get LLM analysis -> Justification: Creates a proactive tool for security architects to identify potential threats early.
        - Library/Method: All visuals are created with HTML/CSS/Tailwind, Chart.js on a Canvas element, and dynamic content is generated via the Gemini API (text generation and TTS). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #333;
        }
        .tab-button.active {
            background-color: #0891b2;
            color: #ffffff;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .process-step {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .process-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .process-step.active {
            border-color: #0891b2;
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(8, 145, 178, 0.2), 0 4px 6px -2px rgba(8, 145, 178, 0.1);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }
        .vulnerability-details {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            z-index: 1000;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0891b2;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-cyan-800 tracking-tight">Enhancing Web Application Security</h1>
            <p id="intro-text" class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">An interactive overview of our project to proactively secure applications through <span class="font-semibold text-cyan-700">Static Code Analysis (SCA)</span>.</p>
            <button id="tts-button" class="mt-4 bg-gray-200 text-gray-800 font-semibold py-2 px-6 rounded-md hover:bg-gray-300 transition-colors">
                Listen to Summary ✨
            </button>
        </header>

        <main>
            <section id="problem-solution" class="mb-20">
                <h2 class="text-3xl font-bold text-center mb-10">Shifting from Reactive to Proactive Security</h2>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                        <h3 class="text-2xl font-semibold mb-3 text-red-600">The Old Way: Reactive Protection</h3>
                        <p class="text-gray-600 mb-4">Traditional security measures like firewalls operate at runtime. They act like a gatekeeper, trying to block attacks after the application is already live and exposed. This approach often fails to catch vulnerabilities embedded deep within the source code.</p>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex items-center"><span class="text-red-500 mr-2">&#10008;</span>Vulnerabilities discovered post-deployment.</li>
                            <li class="flex items-center"><span class="text-red-500 mr-2">&#10008;</span>Higher costs to fix issues in production.</li>
                            <li class="flex items-center"><span class="text-red-500 mr-2">&#10008;</span>Increased risk of data breaches.</li>
                        </ul>
                    </div>
                    <div class="bg-cyan-50 p-6 rounded-lg border border-cyan-200 shadow-sm">
                        <h3 class="text-2xl font-semibold mb-3 text-green-600">The New Way: Proactive DevSecOps</h3>
                        <p class="text-gray-700 mb-4">By integrating Static Code Analysis (SCA) directly into the development lifecycle, we find and fix security flaws before they ever reach production. This "shift-left" approach makes security an integral part of building software, not an afterthought.</p>
                         <ul class="space-y-2 text-gray-700">
                            <li class="flex items-center"><span class="text-green-500 mr-2">&#10004;</span>Flaws identified early in development.</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">&#10004;</span>Reduced attack surface.</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">&#10004;</span>Improved code quality and compliance.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="process" class="mb-20 text-center">
                <h2 class="text-3xl font-bold mb-4">Our Automated Security Workflow</h2>
                <p class="max-w-3xl mx-auto text-gray-600 mb-10">This section illustrates the automated process that integrates security checks directly into the CI/CD pipeline. Click on each step to learn more about how we identify, report, and remediate vulnerabilities in real-time, ensuring that only secure code moves forward.</p>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 mb-8">
                    <div id="step-1" class="process-step bg-white p-4 rounded-lg border-2 border-gray-200 w-full md:w-48 text-center">
                        <div class="text-2xl mb-2">1</div>
                        <h4 class="font-semibold">Commit Code</h4>
                    </div>
                    <div class="text-2xl text-gray-400 transform md:rotate-0 rotate-90">&rarr;</div>
                    <div id="step-2" class="process-step bg-white p-4 rounded-lg border-2 border-gray-200 w-full md:w-48 text-center">
                        <div class="text-2xl mb-2">2</div>
                        <h4 class="font-semibold">Trigger SCA Scan</h4>
                    </div>
                    <div class="text-2xl text-gray-400 transform md:rotate-0 rotate-90">&rarr;</div>
                    <div id="step-3" class="process-step bg-white p-4 rounded-lg border-2 border-gray-200 w-full md:w-48 text-center">
                        <div class="text-2xl mb-2">3</div>
                        <h4 class="font-semibold">Analyze & Report</h4>
                    </div>
                    <div class="text-2xl text-gray-400 transform md:rotate-0 rotate-90">&rarr;</div>
                    <div id="step-4" class="process-step bg-white p-4 rounded-lg border-2 border-gray-200 w-full md:w-48 text-center">
                        <div class="text-2xl mb-2">4</div>
                        <h4 class="font-semibold">Remediate</h4>
                    </div>
                </div>
                <div id="process-details" class="mt-6 p-6 bg-gray-50 rounded-lg min-h-[120px] text-left max-w-4xl mx-auto border">
                    <p class="text-gray-500">Click a step above to see details.</p>
                </div>
            </section>
            
            <section id="stakeholders" class="mb-20">
                <h2 class="text-3xl font-bold text-center mb-4">A Collaborative Approach to Security</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-10">Security is a shared responsibility. This system is designed to empower every stakeholder with the tools and information they need to contribute effectively. Select a role below to understand their unique responsibilities and benefits within this security framework.</p>
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-wrap justify-center border-b border-gray-200 mb-4">
                        <button class="tab-button py-2 px-4 font-semibold text-gray-600 rounded-t-lg transition-colors duration-300 active" data-tab="developer">Developers</button>
                        <button class="tab-button py-2 px-4 font-semibold text-gray-600 rounded-t-lg transition-colors duration-300" data-tab="analyst">Security Analysts</button>
                        <button class="tab-button py-2 px-4 font-semibold text-gray-600 rounded-t-lg transition-colors duration-300" data-tab="manager">Project Managers</button>
                    </div>
                    <div id="developer" class="tab-content active bg-white p-6 rounded-lg border border-gray-200">
                        <h3 class="text-xl font-semibold mb-2">The First Line of Defense</h3>
                        <p class="text-gray-700">Developers are responsible for writing, maintaining, and improving application code. With integrated SCA tools, they receive immediate feedback on potential vulnerabilities, allowing them to fix issues directly in their workflow. This prevents insecure code from ever being merged.</p>
                    </div>
                    <div id="analyst" class="tab-content bg-white p-6 rounded-lg border border-gray-200">
                        <h3 class="text-xl font-semibold mb-2">Guardians of Security</h3>
                        <p class="text-gray-700">Security analysts focus on identifying and analyzing security flaws detected by the SCA tools. They review vulnerability reports, prioritize flaws based on risk, provide actionable recommendations to developers, and ensure compliance with security standards like OWASP and NIST.</p>
                    </div>
                    <div id="manager" class="tab-content bg-white p-6 rounded-lg border border-gray-200">
                        <h3 class="text-xl font-semibold mb-2">Balancing Security & Productivity</h3>
                        <p class="text-gray-700">Project managers oversee the integration of security into the development lifecycle. They ensure SCA tools are incorporated into DevSecOps workflows, monitor project deadlines while enforcing security compliance, and report on the overall security posture to executive stakeholders.</p>
                    </div>
                </div>
            </section>

            <section id="objectives" class="mb-20">
                <h2 class="text-3xl font-bold text-center mb-10">Our Key Objectives & Success Metrics</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-semibold mb-2">Early Vulnerability Detection</h3>
                        <p class="text-sm text-gray-600 mb-3">Implement SCA tools to catch flaws at the earliest possible stage.</p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-cyan-600 h-2.5 rounded-full progress-bar-inner" style="width: 0%" data-width="90%"></div></div>
                    </div>
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-semibold mb-2">Reduce Security Flaws</h3>
                        <p class="text-sm text-gray-600 mb-3">Decrease the number of security vulnerabilities in web applications.</p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-cyan-600 h-2.5 rounded-full progress-bar-inner" style="width: 0%" data-width="75%"></div></div>
                    </div>
                     <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-semibold mb-2">Automate Security Checks</h3>
                        <p class="text-sm text-gray-600 mb-3">Integrate automated scans into the CI/CD pipeline for continuous monitoring.</p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-cyan-600 h-2.5 rounded-full progress-bar-inner" style="width: 0%" data-width="95%"></div></div>
                    </div>
                    <div class="bg-white p-6 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-semibold mb-2">Improve Code Compliance</h3>
                        <p class="text-sm text-gray-600 mb-3">Enhance code quality and ensure adherence to security standards.</p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-cyan-600 h-2.5 rounded-full progress-bar-inner" style="width: 0%" data-width="85%"></div></div>
                    </div>
                </div>
            </section>
            
            <section id="vulnerabilities" class="mb-20 text-center">
                <h2 class="text-3xl font-bold mb-4">Common Vulnerabilities We Target</h2>
                <p class="max-w-3xl mx-auto text-gray-600 mb-10">Click on a bar in the chart below to get an AI-powered explanation and remediation suggestions for that vulnerability.</p>
                <div class="chart-container bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                    <canvas id="vulnerabilityChart"></canvas>
                </div>
            </section>

            <div class="overlay" id="overlay"></div>
            <div class="vulnerability-details" id="vulnerability-details">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="vuln-title" class="text-2xl font-bold text-cyan-800"></h3>
                    <button id="close-vuln-details" class="text-gray-500 hover:text-gray-800">&times;</button>
                </div>
                <div id="vuln-content" class="text-gray-700"></div>
            </div>

            <section id="scope" class="mb-20">
                <h2 class="text-3xl font-bold text-center mb-10">Project Scope</h2>
                <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                    <div class="bg-green-50 p-6 rounded-lg border border-green-200">
                        <h3 class="text-xl font-semibold text-green-800 mb-4">In Scope</h3>
                        <ul class="space-y-3 text-gray-700">
                            <li class="flex items-center"><span class="text-green-600 mr-3">&#10004;</span>Implementation of static code analysis tools.</li>
                            <li class="flex items-center"><span class="text-green-600 mr-3">&#10004;</span>Automated detection of vulnerabilities in source code.</li>
                            <li class="flex items-center"><span class="text-green-600 mr-3">&#10004;</span>Generation of reports and remediation strategies.</li>
                            <li class="flex items-center"><span class="text-green-600 mr-3">&#10004;</span>Integration with CI/CD pipelines.</li>
                        </ul>
                    </div>
                    <div class="bg-red-50 p-6 rounded-lg border border-red-200">
                        <h3 class="text-xl font-semibold text-red-800 mb-4">Out of Scope</h3>
                        <ul class="space-y-3 text-gray-700">
                           <li class="flex items-center"><span class="text-red-600 mr-3">&#10008;</span>Manual penetration testing (Pentesting).</li>
                           <li class="flex items-center"><span class="text-red-600 mr-3">&#10008;</span>Dynamic Application Security Testing (DAST).</li>
                           <li class="flex items-center"><span class="text-red-600 mr-3">&#10008;</span>Runtime application protection.</li>
                           <li class="flex items-center"><span class="text-red-600 mr-3">&#10008;</span>Network-level security configurations.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="ai-code-assistant" class="mb-20">
                <h2 class="text-3xl font-bold text-center mb-4">Secure Code Assistant</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-10">Paste a code snippet below and get an instant security review and remediation suggestions.</p>
                <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <textarea id="code-input" class="w-full h-48 p-4 border rounded-md text-sm font-mono focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="Paste your code here..."></textarea>
                    <button id="analyze-code" class="mt-4 bg-cyan-600 text-white font-semibold py-2 px-6 rounded-md hover:bg-cyan-700 transition-colors">
                        Analyze Code ✨
                    </button>
                    <div id="code-analysis-output" class="text-left mt-6 p-4 bg-gray-50 rounded-lg border min-h-[100px] text-gray-700">
                        <p class="text-gray-500">Your code analysis will appear here.</p>
                    </div>
                </div>
            </section>
            
            <section id="ai-threat-modeling" class="mb-20">
                <h2 class="text-3xl font-bold text-center mb-4">Threat Modeling Assistant</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-10">Describe a new feature or component of your web application and get suggestions for potential threats and mitigation strategies.</p>
                <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <textarea id="threat-input" class="w-full h-48 p-4 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="Describe the component here. E.g., 'A new user registration form that uses a third-party API for email verification.'"></textarea>
                    <button id="analyze-threat" class="mt-4 bg-cyan-600 text-white font-semibold py-2 px-6 rounded-md hover:bg-cyan-700 transition-colors">
                        Analyze Threats ✨
                    </button>
                    <div id="threat-output" class="text-left mt-6 p-4 bg-gray-50 rounded-lg border min-h-[100px] text-gray-700">
                        <p class="text-gray-500">Threat analysis will appear here.</p>
                    </div>
                </div>
            </section>

            <section id="ai-alert-generator" class="mb-20">
                <h2 class="text-3xl font-bold text-center mb-4">Security Alert Generator</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-10">Generate a concise and professional alert message for Slack or email to notify stakeholders of a critical security issue.</p>
                <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="alert-project" class="block text-sm font-semibold mb-1">Project Name</label>
                            <input type="text" id="alert-project" class="w-full p-2 border rounded-md" placeholder="e.g., 'Payment Gateway'">
                        </div>
                        <div>
                            <label for="alert-vulnerability" class="block text-sm font-semibold mb-1">Vulnerability Type</label>
                            <input type="text" id="alert-vulnerability" class="w-full p-2 border rounded-md" placeholder="e.g., 'SQL Injection'">
                        </div>
                        <div>
                            <label for="alert-severity" class="block text-sm font-semibold mb-1">Severity</label>
                            <select id="alert-severity" class="w-full p-2 border rounded-md">
                                <option>Critical</option>
                                <option>High</option>
                                <option>Medium</option>
                                <option>Low</option>
                            </select>
                        </div>
                        <div>
                            <label for="alert-details" class="block text-sm font-semibold mb-1">Key Details</label>
                            <textarea id="alert-details" class="w-full p-2 border rounded-md h-24" placeholder="e.g., 'Found in production. Requires immediate attention.'"></textarea>
                        </div>
                    </div>
                    <button id="generate-alert" class="bg-cyan-600 text-white font-semibold py-2 px-6 rounded-md hover:bg-cyan-700 transition-colors">
                        Generate Alert ✨
                    </button>
                    <div id="alert-output" class="text-left mt-6 p-4 bg-gray-50 rounded-lg border min-h-[100px] text-gray-700">
                        <p class="text-gray-500">Your generated alert will appear here.</p>
                    </div>
                </div>
            </section>

            <section id="timeline-generator" class="mb-20 text-center">
                <h2 class="text-3xl font-bold text-center mb-4">Project Timeline Generator</h2>
                <p class="max-w-3xl mx-auto text-gray-600 mb-10">Use this tool to generate a sample project timeline based on your team size and project duration, with suggestions for key tasks and milestones.</p>
                <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <div class="flex flex-col md:flex-row items-center justify-center gap-4 mb-6">
                        <label for="project-days" class="text-gray-700 font-semibold">Project Days:</label>
                        <input type="number" id="project-days" value="7" min="1" class="w-24 p-2 border rounded-md text-center">
                        <label for="developer-count" class="text-gray-700 font-semibold">Developers:</label>
                        <input type="number" id="developer-count" value="3" min="1" class="w-24 p-2 border rounded-md text-center">
                        <button id="generate-timeline" class="bg-cyan-600 text-white font-semibold py-2 px-6 rounded-md hover:bg-cyan-700 transition-colors">
                            Generate Timeline ✨
                        </button>
                    </div>
                    <div id="timeline-output" class="text-left mt-6 p-4 bg-gray-50 rounded-lg border min-h-[100px] text-gray-700">
                        <p class="text-gray-500">Your generated timeline will appear here.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const processSteps = {
                'step-1': {
                    title: 'Developer Commits Code',
                    description: 'A developer writes or modifies code and commits it to the version control repository (e.g., GitHub, GitLab). This is the starting point for our automated security workflow.'
                },
                'step-2': {
                    title: 'CI/CD Pipeline Triggers SCA Scan',
                    description: 'The commit automatically triggers the Continuous Integration (CI) pipeline. A key stage in this pipeline is the Static Code Analysis (SCA) scan, which begins analyzing the new code immediately.'
                },
                'step-3': {
                    title: 'System Analyzes Code and Generates Report',
                    description: 'The SCA tool scans the source code against a set of security rules to identify potential vulnerabilities. A detailed report is generated, outlining any issues, their severity, and location in the code.'
                },
                'step-4': {
                    title: 'Remediate or Halt Build',
                    description: 'If high-risk vulnerabilities are found, the build process is automatically halted to prevent insecure code from being deployed. For lower-risk issues, the report is sent to the developer and security team for remediation.'
                }
            };

            const processContainer = document.getElementById('process');
            const detailsBox = document.getElementById('process-details');
            let activeStep = null;

            processContainer.addEventListener('click', function(e) {
                const stepElement = e.target.closest('.process-step');
                if (!stepElement) return;

                if (activeStep) {
                    activeStep.classList.remove('active');
                }
                
                stepElement.classList.add('active');
                activeStep = stepElement;
                
                const stepData = processSteps[stepElement.id];
                detailsBox.innerHTML = `<h4 class="font-bold text-lg mb-2 text-cyan-800">${stepData.title}</h4><p class="text-gray-700">${stepData.description}</p>`;
            });

            const tabsContainer = document.querySelector('#stakeholders');
            tabsContainer.addEventListener('click', function(e) {
                if (!e.target.classList.contains('tab-button')) return;

                const tabId = e.target.dataset.tab;
                
                tabsContainer.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
                tabsContainer.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

                e.target.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            });

            const animateProgressBars = () => {
                const progressBars = document.querySelectorAll('.progress-bar-inner');
                progressBars.forEach(bar => {
                    bar.style.width = bar.dataset.width;
                });
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateProgressBars();
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });
            
            observer.observe(document.getElementById('objectives'));

            const vulnerabilityLabels = ['SQL Injection (SQLi)', 'Cross-Site Scripting (XSS)', 'Broken Authentication', 'Insecure Deserialization', 'Security Misconfiguration'];
            const ctx = document.getElementById('vulnerabilityChart').getContext('2d');
            const vulnerabilityChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: vulnerabilityLabels,
                    datasets: [{
                        label: 'Frequency of Detection (Simulated)',
                        data: [85, 78, 65, 50, 92],
                        backgroundColor: 'rgba(8, 145, 178, 0.6)',
                        borderColor: 'rgba(8, 145, 178, 1)',
                        borderWidth: 1,
                        borderRadius: 4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: {
                                color: '#e5e7eb'
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#333',
                            titleFont: { size: 14 },
                            bodyFont: { size: 12 },
                            padding: 10,
                            cornerRadius: 4,
                            displayColors: false
                        }
                    },
                    onClick: (e) => {
                        const points = vulnerabilityChart.getElementsAtEventForMode(e, 'nearest', { intersect: true }, true);
                        if (points.length) {
                            const firstPoint = points[0];
                            const label = vulnerabilityChart.data.labels[firstPoint.index];
                            fetchVulnerabilityDetails(label);
                        }
                    }
                }
            });

            const overlay = document.getElementById('overlay');
            const vulnDetails = document.getElementById('vulnerability-details');
            const vulnTitle = document.getElementById('vuln-title');
            const vulnContent = document.getElementById('vuln-content');
            const closeVulnDetailsBtn = document.getElementById('close-vuln-details');
            
            closeVulnDetailsBtn.addEventListener('click', () => {
                overlay.style.display = 'none';
                vulnDetails.style.display = 'none';
            });

            overlay.addEventListener('click', () => {
                overlay.style.display = 'none';
                vulnDetails.style.display = 'none';
            });

            const hardcodedVulnerabilityResponses = {
                'SQL Injection (SQLi)': `### SQL Injection (SQLi)<br>SQL Injection is an attack where malicious code is inserted into a user input field, which is then passed to a database query. This can lead to unauthorized access, data loss, or even complete control of the database.<br><br>#### Remediation Plan<br>•   **Use Prepared Statements or Parameterized Queries:** This is the most effective way to prevent SQLi. It separates the SQL logic from the user-provided data, so the database knows not to execute the input as code.<br>•   **Input Validation:** Sanitize and validate all user input to ensure it matches the expected format.<br>•   **Principle of Least Privilege:** Limit the database user's permissions to only what is necessary for the application to function.`,
                'Cross-Site Scripting (XSS)': `### Cross-Site Scripting (XSS)<br>XSS attacks occur when an attacker injects malicious scripts into a web application, which is then executed by other users' browsers. This can be used to steal session cookies, deface websites, or redirect users to malicious sites.<br><br>#### Remediation Plan<br>•   **Encode Output:** Always encode user-provided data before rendering it in the HTML to prevent it from being interpreted as executable code.<br>•   **Content Security Policy (CSP):** Implement a CSP header to control which sources are allowed to execute scripts on your page, significantly reducing the risk of XSS.<br>•   **Sanitize Input:** Use libraries to sanitize and remove dangerous characters from user input.`,
                'Broken Authentication': `### Broken Authentication<br>This vulnerability is a broad category that covers any security flaw related to how an application handles user authentication. Weak password policies, insecure session management, or flawed account recovery mechanisms can all lead to unauthorized access.<br><br>#### Remediation Plan<br>•   **Implement Strong Password Policies:** Enforce complex passwords and use multi-factor authentication (MFA).<br>•   **Secure Session Management:** Use secure, server-side generated session tokens and ensure they expire properly.<br>•   **Use Strong Cryptography:** Never store passwords in plain text. Always use strong, one-way cryptographic hashing algorithms with salts.`,
                'Insecure Deserialization': `### Insecure Deserialization<br>This vulnerability occurs when untrusted data is deserialized by the application, leading to malicious code execution. An attacker can craft a serialized object that, when processed by the application, triggers unintended actions or remote code execution.<br><br>#### Remediation Plan<br>•   **Avoid Deserializing Untrusted Data:** If possible, do not deserialize data from untrusted or unauthenticated sources.<br>•   **Use a Format-Specific Parser:** Use a format that is not susceptible to deserialization attacks, such as JSON.<br>•   **Implement Integrity Checks:** Add digital signatures or HMACs to the serialized data to verify its integrity before deserialization.`,
                'Security Misconfiguration': `### Security Misconfiguration<br>This is a broad vulnerability type that includes incorrect security configurations at any level of the application stack, such as the web server, application server, or database. Examples include having default passwords, exposed error messages that reveal sensitive information, or unpatched systems.<br><br>#### Remediation Plan<br>•   **Use Secure Hardening Standards:** Implement and maintain a process for secure configuration of all systems and software.<br>•   **Regular Audits:** Conduct regular security audits and vulnerability scanning to find and fix misconfigurations.<br>•   **Remove Unnecessary Features:** Remove or disable any features, services, or pages that are not required for the application to function.`
            };

            function fetchVulnerabilityDetails(vulnerabilityName) {
                vulnTitle.textContent = vulnerabilityName;
                vulnContent.innerHTML = `<div class="flex items-center justify-center"><div class="loading-spinner"></div><span class="ml-2">Loading details...</span></div>`;
                overlay.style.display = 'block';
                vulnDetails.style.display = 'block';

                setTimeout(() => {
                    vulnContent.innerHTML = hardcodedVulnerabilityResponses[vulnerabilityName];
                }, 1000);
            }

            const ttsButton = document.getElementById('tts-button');
            ttsButton.style.display = 'none';

            const generateTimelineBtn = document.getElementById('generate-timeline');
            const projectDaysInput = document.getElementById('project-days');
            const developerCountInput = document.getElementById('developer-count');
            const timelineOutput = document.getElementById('timeline-output');

            const hardcodedTimelines = {
                '7': {
                    '3': `**7-Day Project Timeline with 3 Developers**<br><br>_This timeline is for a basic implementation. It assumes a pre-selected SCA tool and a ready CI/CD environment._<br><br>**Day 1: Planning & Setup**<br>•   Project kick-off meeting.<br>•   Configure version control integration (e.g., GitHub).<br>•   Set up initial project structure and dependencies.<br><br>**Day 2-3: SCA Tool Integration**<br>•   Install and configure the SCA tool within the CI/CD pipeline.<br>•   Define and import security rules and standards (e.g., OWASP Top 10).<br>•   Run the first automated scan on the codebase.<br><br>**Day 4: Analysis & Reporting**<br>•   Review the initial scan report with the security team.<br>•   Prioritize vulnerabilities based on severity (Critical, High).<br>•   Set up automated alerts for new high-risk findings.<br><br>**Day 5-6: Remediation Sprints**<br>•   Developers work to fix the highest-priority vulnerabilities identified.<br>•   Re-run scans after each fix to verify remediation.<br>•   Conduct code reviews to ensure secure coding practices.<br><br>**Day 7: Final Review & Documentation**<br>•   Generate a final project security report.<br>•   Document the new security workflow and best practices.<br>•   Project sign-off and knowledge transfer.`
                },
                '30': {
                    '3': `**30-Day Project Timeline with 3 Developers**<br><br>_This is a more detailed timeline for a full-scale implementation, including deeper integration and stakeholder training._<br><br>**Week 1: Discovery & Tool Selection**<br>•   Detailed project scoping and requirement gathering.<br>•   Research and select a suitable SCA tool (e.g., SonarQube, Checkmarx).<br>•   Establish secure coding standards and baselines.<br><br>**Week 2: Integration & Initial Scanning**<br>•   Integrate the chosen SCA tool into the CI/CD pipeline.<br>•   Configure the tool to use a comprehensive rule set.<br>•   Perform a full-scale initial scan of the entire codebase.<br><br>**Week 3: Analysis, Reporting & Training**<br>•   Security analysts review and triage thousands of findings.<br>•   Developers receive training on how to interpret scan results and fix common vulnerabilities.<br>•   Set up dashboards and automated alerts for project managers and security teams.<br><br>**Week 4: Remediation & Optimization**<br>•   The team focuses on a sprint to fix critical and high-severity issues.<br>•   Refine the security rules to reduce false positives.<br>•   Create custom rules or policies for project-specific needs.`
                }
            };
            
            generateTimelineBtn.addEventListener('click', () => {
                const projectDays = projectDaysInput.value;
                const developerCount = developerCountInput.value;
                
                if (projectDays <= 0 || developerCount <= 0) {
                    timelineOutput.innerHTML = `<p class="text-red-600">Please enter valid numbers for project days and developers.</p>`;
                    return;
                }

                timelineOutput.innerHTML = `<div class="flex items-center justify-center"><div class="loading-spinner"></div><span class="ml-2">Generating timeline...</span></div>`;

                setTimeout(() => {
                    if (projectDays == 7 && developerCount == 3) {
                        timelineOutput.innerHTML = hardcodedTimelines['7']['3'];
                    } else if (projectDays == 30 && developerCount == 3) {
                        timelineOutput.innerHTML = hardcodedTimelines['30']['3'];
                    } else {
                         timelineOutput.innerHTML = `<p class="text-gray-700">No specific timeline found for your input. Here's a general approach:<br><br>•   **Weeks 1-2:** Project scoping, tool selection, and initial integration into the CI/CD pipeline.<br>•   **Weeks 3-4:** Initial scan, vulnerability triage, and developer training.<br>•   **Weeks 5-6:** Dedicated sprints to remediate critical and high-severity issues.<br>•   **Week 7 onward:** Continuous scanning and monitoring, with a focus on fixing new issues as they arise.</p>`;
                    }
                }, 1000);
            });

            const hardcodedCodeAnalysis = {
                'unsafe_sql': `### Security Analysis Result<br><br>**Vulnerability Found: SQL Injection (SQLi)**<br>This code is vulnerable because it constructs a SQL query by directly concatenating user input (\`username\`). An attacker could provide a malicious string like \`' OR '1'='1'\` to bypass authentication or access unauthorized data.<br><br>**Remediation:**<br>To fix this, you must use a parameterized query. This separates the SQL command from the user-provided data, so the database treats the input as a value, not as executable code.<br><br>•   **Corrected Code Example:**<br>
                \`\`\`javascript
                const query = 'SELECT * FROM users WHERE username = ?';
                db.run(query, [username], (err, rows) => { /* ... */ });
                \`\`\`<br>•   **Best Practice:** Always treat all user input as untrusted and never concatenate it directly into a database query. Use prepared statements and ORMs that provide built-in protection against SQL injection.`
            };

            const analyzeCodeBtn = document.getElementById('analyze-code');
            const codeInput = document.getElementById('code-input');
            const codeOutput = document.getElementById('code-analysis-output');
            
            analyzeCodeBtn.addEventListener('click', async () => {
                const code = codeInput.value.trim();
                if (code === '') {
                    codeOutput.innerHTML = `<p class="text-red-600">Please paste some code to analyze.</p>`;
                    return;
                }

                codeOutput.innerHTML = `<div class="flex items-center justify-center"><div class="loading-spinner"></div><span class="ml-2">Analyzing code...</span></div>`;

                setTimeout(() => {
                    codeOutput.innerHTML = hardcodedCodeAnalysis['unsafe_sql'];
                }, 1000);
            });
            
            const hardcodedThreatModeling = {
                'user_form': `### Threat Modeling Analysis: User Registration Form<br><br>**Threats**<br>•   **Data Injection:** Malicious data could be submitted through the form to exploit backend systems.<br>•   **Account Enumeration:** Attackers could determine valid user accounts by observing different responses for existing vs. non-existing email addresses.<br>•   **Denial of Service (DoS):** An attacker could flood the form with requests to overwhelm the API.<br><br>**Attack Vectors**<br>•   **Direct Form Submission:** Attacker submits malicious data directly via the form.<br>•   **API Abuse:** Attacker bypasses the frontend and interacts directly with the email verification API endpoint.<br>•   **Credential Stuffing:** Using stolen credentials from another source to attempt to log in to this application.<br><br>**Mitigation Strategies**<br>•   **Input Validation & Sanitization:** Validate and sanitize all user input on both the client and server sides.<br>•   **Rate Limiting:** Implement rate limiting on form submissions and API calls to prevent DoS attacks.<br>•   **Use CAPTCHA:** Add a CAPTCHA to the registration form to deter automated bot attacks.<br>•   **Secure API Keys:** Ensure the third-party API key is stored securely and not exposed in client-side code.`
            };

            const analyzeThreatBtn = document.getElementById('analyze-threat');
            const threatInput = document.getElementById('threat-input');
            const threatOutput = document.getElementById('threat-output');

            analyzeThreatBtn.addEventListener('click', () => {
                const componentDescription = threatInput.value.trim();
                if (componentDescription === '') {
                    threatOutput.innerHTML = `<p class="text-red-600">Please describe a component to analyze.</p>`;
                    return;
                }

                threatOutput.innerHTML = `<div class="flex items-center justify-center"><div class="loading-spinner"></div><span class="ml-2">Analyzing component...</span></div>`;

                setTimeout(() => {
                    threatOutput.innerHTML = hardcodedThreatModeling['user_form'];
                }, 1000);
            });
            
            const hardcodedAlerts = {
                'critical': `### SECURITY ALERT: CRITICAL VULNERABILITY DETECTED<br><br>•   **Project:** Payment Gateway<br>•   **Vulnerability:** SQL Injection<br>•   **Severity:** Critical<br>•   **Details:** A high-severity SQL injection vulnerability was found in production code. This requires immediate attention.<br><br>**Action Required:** All developers must drop work and prioritize a fix. Security analysts are reviewing the details now. A patch release is being prepared.`,
                'high': `### SECURITY ALERT: HIGH VULNERABILITY DETECTED<br><br>•   **Project:** Payment Gateway<br>•   **Vulnerability:** SQL Injection<br>•   **Severity:** High<br>•   **Details:** A high-severity SQL injection vulnerability was found in production code. This requires immediate attention.<br><br>**Action Required:** All developers must drop work and prioritize a fix. Security analysts are reviewing the details now. A patch release is being prepared.`,
                'medium': `### SECURITY ALERT: MEDIUM VULNERABILITY DETECTED<br><br>•   **Project:** Payment Gateway<br>•   **Vulnerability:** SQL Injection<br>•   **Severity:** Medium<br>•   **Details:** A medium-severity SQL injection vulnerability was found in production code. This requires immediate attention.<br><br>**Action Required:** All developers must drop work and prioritize a fix. Security analysts are reviewing the details now. A patch release is being prepared.`,
                'low': `### SECURITY ALERT: LOW VULNERABILITY DETECTED<br><br>•   **Project:** Payment Gateway<br>•   **Vulnerability:** SQL Injection<br>•   **Severity:** Low<br>•   **Details:** A low-severity SQL injection vulnerability was found in production code. This requires immediate attention.<br><br>**Action Required:** All developers must drop work and prioritize a fix. Security analysts are reviewing the details now. A patch release is being prepared.`
            };

            const generateAlertBtn = document.getElementById('generate-alert');
            const alertProjectInput = document.getElementById('alert-project');
            const alertVulnerabilityInput = document.getElementById('alert-vulnerability');
            const alertSeverityInput = document.getElementById('alert-severity');
            const alertDetailsInput = document.getElementById('alert-details');
            const alertOutput = document.getElementById('alert-output');

            generateAlertBtn.addEventListener('click', async () => {
                const project = alertProjectInput.value;
                const vulnerability = alertVulnerabilityInput.value;
                const severity = alertSeverityInput.value;
                const details = alertDetailsInput.value;
                
                if (project === '' || vulnerability === '' || details === '') {
                    alertOutput.innerHTML = `<p class="text-red-600">Please fill out all fields to generate an alert.</p>`;
                    return;
                }
                
                alertOutput.innerHTML = `<div class="flex items-center justify-center"><div class="loading-spinner"></div><span class="ml-2">Generating alert...</span></div>`;

                setTimeout(() => {
                    alertOutput.innerHTML = hardcodedAlerts[severity.toLowerCase()];
                }, 1000);
            });
        });
    </script>
</body>
</html>

